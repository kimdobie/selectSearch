
// Version 1.2.1
jQuery.fn.selectSearch=function(d,c){return this.each(function(){var a=jQuery(this),b=jQuery(d),e=true,k=false,f=true,g=true,m=false,n=true;if(c!=undefined){if(c.showEmptyOptGroup!=undefined&&typeof c.showEmptyOptGroup=="boolean")m=c.showEmptyOptGroup;if(c.selectLast!=undefined&&typeof c.selectLast=="boolean")e=c.selectLast;if(c.startSearchFromFront!=undefined&&typeof c.startSearchFromFront=="boolean")k=c.startSearchFromFront;if(c.fixedWidth!=undefined&&typeof c.fixedWidth=="boolean")n=c.fixedWidth; if(c.sortOptions!=undefined&&typeof c.sortOptions=="boolean")f=c.sortOptions;if(c.sortOptGroups!=undefined&&typeof c.sortOptGroups=="boolean")g=c.sortOptGroups}n&&a.css("width",a.css("width"));b.val("");b.keyup(function(){jQuery(this).val();for(var h=true,i=[],o=selectSearch_Options.optionItems[a.attr("id")],l=0;l<o.length;l++){i[l]=new Array(o[l][0],[]);for(j=0;j<o[l][1].length;j++){h=false;(h=k?matchingFromStart(b.val(),o[l][1][j].text):matching(b.val(),o[l][1][j].text))&&i[l][1].push(o[l][1][j])}}a.selectSearch_buildOptions(i, m);e&&a.find("option").length==1&&a.find("option:visible").each(function(){this.selected=true})});if(a.attr("id")==""){a.attr("id","selectSearch_SelectList"+selectSearch_IDCounter);selectSearch_IDCounter++}a.attr("id");var p=[],r=null,q=-1;a.children().each(function(){var h="",i=false;if(this.tagName.toLowerCase()=="optgroup"){h=jQuery(this).attr("label");i=true}if(r!=h){q++;r=h;p[q]=new Array(h,[])}i?jQuery(this).children().each(function(){p[q][1].push({text:jQuery(this).text(),value:jQuery(this).attr("value")})}): p[q][1].push({text:jQuery(this).text(),value:jQuery(this).attr("value")})});selectSearch_Options.optionItems[a.attr("id")]=p;a.selectSearch_sortOptions(g,f,m);matchingFromStart=function(h,i){return(new RegExp("^"+h+".*","i")).test(i)};matching=function(h,i){return(new RegExp(h,"ig")).test(i)}})}; jQuery.fn.selectSearch_buildOptions=function(d,c){jQueryselectList=jQuery(this);jQueryselectList.html("");for(var a=0;a<d.length;a++){var b="";if(d[a][0]!=""&&(c||d[a][1].length>0))b+="<optgroup label='"+d[a][0]+"'>";for(var e=0;e<d[a][1].length;e++)b+="<option value='"+d[a][1][e].value+"'>"+d[a][1][e].text+"</option>";if(d[a][0]!=""&&(c||d[a][1].length>0))b+="</optgroup>";jQueryselectList.append(b)}return this}; jQuery.fn.selectSearch_sortOptions=function(d,c,a){selectItems=selectSearch_Options.optionItems[jQuery(this).attr("id")];d&&selectItems.sort(function(b,e){if(e[0].toLowerCase()<b[0].toLowerCase())return 1;return e[0].toLowerCase()>b[0].toLowerCase()?-1:0});if(c)for(d=0;d<selectItems.length;d++)selectItems[d][1].sort(function(b,e){if(e.text.toLowerCase()<b.text.toLowerCase())return 1;return e.text.toLowerCase()>b.text.toLowerCase()?-1:0});jQuery(this).selectSearch_buildOptions(selectItems,a);return this}; jQuery.fn.selectSearch_addOption=function(d,c,a,b){var e=true,k=true,f=true,g=null;if(b!=undefined){if(b.sortOptions!=undefined&&typeof b.sortOptions=="boolean")e=b.sortOptions;if(b.sortOptGroups!=undefined&&typeof b.sortOptGroups=="boolean")k=b.sortOptGroups;if(b.showEmptyOptGroup!=undefined&&typeof b.showEmptyOptGroup=="boolean")f=b.showEmptyOptGroup;if(b.searchBox!=undefined&&typeof b.searchBox=="object")g=b.searchBox}if(typeof a=="undefined")a="";b=selectSearch_Options.optionItems[jQuery(this).attr("id")]; for(var m=false,n=0;n<b.length&&!m;n++)if(a==b[n][0]){b[n][1].push({text:d,value:c});m=true}m||b.push(new Array(a,new Array({text:d,value:c})));jQuery(this).selectSearch_sortOptions(k,e,f);g!=null&&g.trigger("keyup");return this}; jQuery.fn.selectSearch_removeOption=function(d,c,a){if(c==undefined)c="";var b=true;if(a==undefined||a==""){a="";b=false}for(var e=selectSearch_Options.optionItems[jQuery(this).attr("id")],k=false,f=0;f<e.length&&!k;f++)if(a==e[f][0]||!b)for(var g=0;g<e[f][1].length&&!k;g++)if(e[f][1][g].text==d&&e[f][1][g].value==c){e[f][1].splice(g,1);k=true}if(b){a=jQuery(this).find('optgroup[label="'+a+'"]').eq(0);a.find('option[value="'+c+'"]:contains("'+d+'")').eq(0).remove();a.find("option").length==0&&a.remove()}else jQuery(this).find('option[value="'+ c+'"]:contains("'+d+'")').eq(0).remove();return this};function selectSearch_OptionsObject(){this.optionItems=[]}var selectSearch_Options=new selectSearch_OptionsObject,selectSearch_IDCounter=0;