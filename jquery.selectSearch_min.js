
// Version 1.2
jQuery.fn.selectSearch=function(d,c){return this.each(function(){var a=jQuery(this),b=jQuery(d),e=true,i=false,g=true,h=true,l=false,m=true;if(c!=undefined){if(c.showEmptyOptGroup!=undefined&&typeof c.showEmptyOptGroup=="boolean")l=c.showEmptyOptGroup;if(c.selectLast!=undefined&&typeof c.selectLast=="boolean")e=c.selectLast;if(c.startSearchFromFront!=undefined&&typeof c.startSearchFromFront=="boolean")i=c.startSearchFromFront;if(c.fixedWidth!=undefined&&typeof c.fixedWidth=="boolean")m=c.fixedWidth;
if(c.sortOptions!=undefined&&typeof c.sortOptions=="boolean")g=c.sortOptions;if(c.sortOptGroups!=undefined&&typeof c.sortOptGroups=="boolean")h=c.sortOptGroups}m&&a.css("width",a.css("width"));b.val("");b.keyup(function(){jQuery(this).val();for(var f=true,n=[],o=selectSearch_Options.optionItems[a.attr("id")],k=0;k<o.length;k++){n[k]=new Array(o[k][0],[]);for(j=0;j<o[k][1].length;j++){f=false;(f=i?matchingFromStart(b.val(),o[k][1][j].text):matching(b.val(),o[k][1][j].text))&&n[k][1].push(o[k][1][j])}}a.selectSearch_buildOptions(n,
l);e&&a.find("option").length==1&&a.find("option:visible").each(function(){this.selected=true})});if(a.attr("id")==""){a.attr("id","selectSearch_SelectList"+selectSearch_IDCounter);selectSearch_IDCounter++}a.attr("id");var p=[],r=null,q=-1;a.find("option").each(function(){var f;f=jQuery(this).parent().get(0).tagName.toLowerCase()=="select"?"":jQuery(this).parent().eq(0).attr("label");if(r!=f){r=f;q++;p[q]=new Array(f,[])}p[q][1].push({text:jQuery(this).text(),value:jQuery(this).attr("value")})});
selectSearch_Options.optionItems[a.attr("id")]=p;g&&a.selectSearch_sortOptions(h,l);matchingFromStart=function(f,n){f=new RegExp("^"+f+".*","i");return f.test(n)};matching=function(f,n){f=new RegExp(f,"ig");return f.test(n)}})};
jQuery.fn.selectSearch_buildOptions=function(d,c){jQueryselectList=jQuery(this);jQueryselectList.html("");for(var a=0;a<d.length;a++){var b="";if(d[a][0]!=""&&(c||d[a][1].length>0))b+="<optgroup label='"+d[a][0]+"'>";for(var e=0;e<d[a][1].length;e++)b+="<option value='"+d[a][1][e].value+"'>"+d[a][1][e].text+"</option>";if(d[a][0]!=""&&(c||d[a][1].length>0))b+="</optgroup>";jQueryselectList.append(b)}return this};
jQuery.fn.selectSearch_sortOptions=function(d,c){selectItems=selectSearch_Options.optionItems[jQuery(this).attr("id")];d&&selectItems.sort(function(a,b){if(b[0]<a[0])return 1;return b[0]>a[0]?-1:0});for(d=0;d<selectItems.length;d++)selectItems[d][1].sort(function(a,b){if(b.text<a.text)return 1;return b.text>a.text?-1:0});jQuery(this).selectSearch_buildOptions(selectItems,c);return this};
jQuery.fn.selectSearch_addOption=function(d,c,a,b){var e=true,i=true,g=true,h=null;if(b!=undefined){if(b.sortOptions!=undefined&&typeof b.sortOptions=="boolean")e=b.sortOptions;if(b.sortOptGroups!=undefined&&typeof b.sortOptGroups=="boolean")i=b.sortOptGroups;if(b.showEmptyOptGroup!=undefined&&typeof b.showEmptyOptGroup=="boolean")g=b.showEmptyOptGroup;if(b.searchBox!=undefined&&typeof b.searchBox=="object")h=b.searchBox}if(typeof a=="undefined")a="";b=selectSearch_Options.optionItems[jQuery(this).attr("id")];
for(var l=false,m=0;m<b.length&&!l;m++)if(a==b[m][0]){b[m][1].push({text:d,value:c});l=true}l||b.push(new Array(a,new Array({text:d,value:c})));e&&jQuery(this).selectSearch_sortOptions(i,g);h!=null&&h.trigger("keyup");return this};
jQuery.fn.selectSearch_removeOption=function(d,c,a){if(c==undefined)c="";var b=true;if(a==undefined||a==""){a="";b=false}for(var e=selectSearch_Options.optionItems[jQuery(this).attr("id")],i=false,g=0;g<e.length&&!i;g++)if(a==e[g][0]||!b)for(var h=0;h<e[g][1].length&&!i;h++)if(e[g][1][h].text==d&&e[g][1][h].value==c){e[g][1].splice(h,1);i=true}if(b){a=jQuery(this).find('optgroup[label="'+a+'"]').eq(0);a.find('option[value="'+c+'"]:contains("'+d+'")').eq(0).remove();a.find("option").length==0&&a.remove()}else jQuery(this).find('option[value="'+
c+'"]:contains("'+d+'")').eq(0).remove();return this};function selectSearch_OptionsObject(){this.optionItems=[]}var selectSearch_Options=new selectSearch_OptionsObject,selectSearch_IDCounter=0;